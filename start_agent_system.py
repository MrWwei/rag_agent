"""
æ™ºèƒ½ä½“ç³»ç»Ÿå¯åŠ¨å™¨
æ¼”ç¤ºä¸åŒç±»å‹çš„æ™ºèƒ½ä½“æ„å»ºæ–¹æ¡ˆ
"""

import os
import sys
import time
from typing import Dict, Any
from src.medical_agent import MedicalAgent


class AgentSystemDemo:
    """æ™ºèƒ½ä½“ç³»ç»Ÿæ¼”ç¤ºç±»"""
    
    def __init__(self):
        self.agents = {}
        self.current_agent = None
        
    def initialize_agents(self):
        """åˆå§‹åŒ–ä¸åŒç±»å‹çš„æ™ºèƒ½ä½“"""
        print("ğŸš€ åˆå§‹åŒ–æ™ºèƒ½ä½“ç³»ç»Ÿ...")
        
        # 1. ReActæ™ºèƒ½ä½“ï¼ˆæ¨ç†+è¡ŒåŠ¨ï¼‰
        print("   åˆå§‹åŒ– ReAct æ™ºèƒ½ä½“...")
        try:
            self.agents["react"] = MedicalAgent(
                vector_store_path="./vector_store",
                model="qwen-plus",
                enable_rag=True,
                max_iterations=5,
                temperature=0.1
            )
            print("   âœ… ReAct æ™ºèƒ½ä½“åˆå§‹åŒ–æˆåŠŸ")
        except Exception as e:
            print(f"   âŒ ReAct æ™ºèƒ½ä½“åˆå§‹åŒ–å¤±è´¥: {e}")
        
        # # 2. ç®€åŒ–æ™ºèƒ½ä½“ï¼ˆä»…RAG+LLMï¼‰
        # print("   åˆå§‹åŒ–ç®€åŒ–æ™ºèƒ½ä½“...")
        # try:
        #     self.agents["simple"] = MedicalAgent(
        #         vector_store_path="./vector_store",
        #         model="qwen-plus",
        #         enable_rag=True,
        #         max_iterations=1,  # åªè¿›è¡Œä¸€æ¬¡æ¨ç†
        #         temperature=0.0
        #     )
        #     print("   âœ… ç®€åŒ–æ™ºèƒ½ä½“åˆå§‹åŒ–æˆåŠŸ")
        # except Exception as e:
        #     print(f"   âŒ ç®€åŒ–æ™ºèƒ½ä½“åˆå§‹åŒ–å¤±è´¥: {e}")
            
        print(f"\nâœ… æ™ºèƒ½ä½“ç³»ç»Ÿåˆå§‹åŒ–å®Œæˆï¼å¯ç”¨æ™ºèƒ½ä½“: {list(self.agents.keys())}\n")
    
    def explain_agent_architectures(self):
        """è§£é‡Šä¸åŒçš„æ™ºèƒ½ä½“æ¶æ„"""
        explanation = """
ğŸ§  æ™ºèƒ½ä½“ï¼ˆAgentï¼‰æ„å»ºæ–¹æ¡ˆè¯¦è§£

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“– **1. ReAct æ¨¡å¼ï¼ˆReasoning + Actingï¼‰**
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç‰¹ç‚¹ï¼šæ€è€ƒ-è¡ŒåŠ¨-è§‚å¯Ÿçš„å¾ªç¯æ¨¡å¼                               â”‚
â”‚ æµç¨‹ï¼šé—®é¢˜ â†’ æ€è€ƒ â†’ é€‰æ‹©å·¥å…· â†’ æ‰§è¡Œ â†’ è§‚å¯Ÿç»“æœ â†’ å†æ€è€ƒ...    â”‚
â”‚ ä¼˜åŠ¿ï¼šèƒ½å¤„ç†å¤æ‚çš„å¤šæ­¥éª¤ä»»åŠ¡ï¼Œæ¨ç†è¿‡ç¨‹é€æ˜                   â”‚
â”‚ é€‚ç”¨ï¼šéœ€è¦å¤šæ­¥æ¨ç†å’Œå·¥å…·è°ƒç”¨çš„å¤æ‚é—®é¢˜                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ› ï¸ **2. Function Calling æ¨¡å¼**
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç‰¹ç‚¹ï¼šåŸºäºå¤§æ¨¡å‹çš„å‡½æ•°è°ƒç”¨èƒ½åŠ›                               â”‚
â”‚ æµç¨‹ï¼šé—®é¢˜ â†’ æ¨¡å‹é€‰æ‹©å‡½æ•° â†’ æ‰§è¡Œå‡½æ•° â†’ è¿”å›ç»“æœ             â”‚
â”‚ ä¼˜åŠ¿ï¼šç®€å•ç›´æ¥ï¼Œå®¹æ˜“å®ç°                                     â”‚
â”‚ é€‚ç”¨ï¼šæœ‰æ˜ç¡®å·¥å…·é›†çš„ä»»åŠ¡è‡ªåŠ¨åŒ–                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ“‹ **3. Plan-and-Execute æ¨¡å¼**
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç‰¹ç‚¹ï¼šå…ˆåˆ¶å®šè¯¦ç»†è®¡åˆ’ï¼Œå†é€æ­¥æ‰§è¡Œ                             â”‚
â”‚ æµç¨‹ï¼šé—®é¢˜ â†’ åˆ¶å®šè®¡åˆ’ â†’ é€æ­¥æ‰§è¡Œ â†’ è°ƒæ•´è®¡åˆ’ â†’ å®Œæˆä»»åŠ¡     â”‚
â”‚ ä¼˜åŠ¿ï¼šé€‚åˆé•¿æœŸä»»åŠ¡ï¼Œæ‰§è¡Œè¿‡ç¨‹å¯æ§                             â”‚
â”‚ é€‚ç”¨ï¼šå¤æ‚çš„é¡¹ç›®ç®¡ç†ã€å¤šæ­¥éª¤ä»»åŠ¡                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ‘¥ **4. Multi-Agent åä½œæ¨¡å¼**
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç‰¹ç‚¹ï¼šå¤šä¸ªä¸“é—¨åŒ–æ™ºèƒ½ä½“ååŒå·¥ä½œ                               â”‚
â”‚ æµç¨‹ï¼šä»»åŠ¡åˆ†è§£ â†’ åˆ†é…ç»™ä¸“é—¨æ™ºèƒ½ä½“ â†’ åä½œæ‰§è¡Œ â†’ ç»“æœæ•´åˆ     â”‚
â”‚ ä¼˜åŠ¿ï¼šä¸“ä¸šåŒ–åˆ†å·¥ï¼Œå¤„ç†å¤æ‚ç³»ç»Ÿ                               â”‚
â”‚ é€‚ç”¨ï¼šå¤§å‹ç³»ç»Ÿï¼Œéœ€è¦ä¸åŒä¸“ä¸šçŸ¥è¯†çš„ä»»åŠ¡                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ”„ **5. è®°å¿†å¢å¼ºæ¨¡å¼ï¼ˆMemory-Augmentedï¼‰**
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç‰¹ç‚¹ï¼šå…·å¤‡é•¿æœŸè®°å¿†å’Œä¸Šä¸‹æ–‡ç®¡ç†èƒ½åŠ›                           â”‚
â”‚ æµç¨‹ï¼šé—®é¢˜ â†’ æ£€ç´¢è®°å¿† â†’ æ¨ç† â†’ æ‰§è¡Œ â†’ æ›´æ–°è®°å¿†             â”‚
â”‚ ä¼˜åŠ¿ï¼šæ”¯æŒé•¿æœŸå¯¹è¯ï¼Œä¸ªæ€§åŒ–æœåŠ¡                               â”‚
â”‚ é€‚ç”¨ï¼šå®¢æœã€ä¸ªäººåŠ©æ‰‹ã€æŒç»­å­¦ä¹ åœºæ™¯                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ¯ **6. ç›®æ ‡å¯¼å‘æ¨¡å¼ï¼ˆGoal-Orientedï¼‰**
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç‰¹ç‚¹ï¼šå›´ç»•æ˜ç¡®ç›®æ ‡è¿›è¡Œè§„åˆ’å’Œæ‰§è¡Œ                             â”‚
â”‚ æµç¨‹ï¼šè®¾å®šç›®æ ‡ â†’ åˆ†è§£å­ç›®æ ‡ â†’ æ‰§è¡Œç­–ç•¥ â†’ è¯„ä¼°ç»“æœ           â”‚
â”‚ ä¼˜åŠ¿ï¼šç›®æ ‡æ˜ç¡®ï¼Œæ‰§è¡Œé«˜æ•ˆ                                     â”‚
â”‚ é€‚ç”¨ï¼šæ˜ç¡®ç›®æ ‡çš„ä»»åŠ¡ï¼Œå¦‚é”€å”®ã€å®¢æˆ·æœåŠ¡                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ¥ **æœ¬é¡¹ç›®é‡‡ç”¨çš„æ–¹æ¡ˆï¼šReAct + RAG + Tools**

æ ¸å¿ƒç»„ä»¶ï¼š
â€¢ ğŸ§  ReActæ¨ç†å¼•æ“ï¼šæ€è€ƒ-è¡ŒåŠ¨-è§‚å¯Ÿå¾ªç¯
â€¢ ğŸ“š RAGæ£€ç´¢ç³»ç»Ÿï¼šåŒ»ç–—çŸ¥è¯†åº“æ£€ç´¢
â€¢ ğŸ› ï¸ å·¥å…·åº“ï¼š6ç§ä¸“ä¸šåŒ»ç–—å·¥å…·
â€¢ ğŸ’¬ å¯¹è¯ç®¡ç†ï¼šå¤šè½®å¯¹è¯æ”¯æŒ
â€¢ ğŸ” ä¸Šä¸‹æ–‡ç®¡ç†ï¼šæ™ºèƒ½ä¸Šä¸‹æ–‡æ„ŸçŸ¥

æŠ€æœ¯æ ˆï¼š
â€¢ LangChainï¼šæ™ºèƒ½ä½“æ¡†æ¶
â€¢ OpenAI APIï¼šå¤§è¯­è¨€æ¨¡å‹
â€¢ ChromaDBï¼šå‘é‡æ•°æ®åº“
â€¢ Sentence Transformersï¼šæ–‡æœ¬åµŒå…¥

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        """
        
        print(explanation)
    
    def demo_react_agent(self):
        """æ¼”ç¤ºReActæ™ºèƒ½ä½“"""
        if "react" not in self.agents:
            print("âŒ ReActæ™ºèƒ½ä½“æœªåˆå§‹åŒ–")
            return
            
        agent = self.agents["react"]
        print("\n" + "="*60)
        print("ğŸ§  ReAct æ™ºèƒ½ä½“æ¼”ç¤º")
        print("="*60)
        
        # æ¼”ç¤ºåŠŸèƒ½
        print(agent.demonstrate_capabilities())
        
        # ç¤ºä¾‹å¯¹è¯
        test_queries = [
            "æˆ‘æœ€è¿‘æ€»æ˜¯æ„Ÿåˆ°èƒ¸é—·ï¼Œæœ‰æ—¶è¿˜ä¼´æœ‰è½»å¾®èƒ¸ç—›ï¼Œè¿™ä¸¥é‡å—ï¼Ÿ",
            # "é˜¿å¸åŒ¹æ—çš„å‰¯ä½œç”¨æœ‰å“ªäº›ï¼Ÿé€‚åˆä»€ä¹ˆäººç¾¤æœç”¨ï¼Ÿ",
            # "ç³–å°¿ç—…æ‚£è€…åº”è¯¥å¦‚ä½•å®‰æ’æ—¥å¸¸é¥®é£Ÿï¼Ÿ"
        ]
        
        print("\nğŸ­ **æ™ºèƒ½ä½“å¯¹è¯æ¼”ç¤º**\n")
        
        for i, query in enumerate(test_queries, 1):
            print(f"\n--- ç¤ºä¾‹ {i} ---")
            print(f"ğŸ‘¤ ç”¨æˆ·: {query}")
            
            try:
                response = agent.chat(query)
                print(f"ğŸ¤– æ™ºèƒ½ä½“: {response}")
            except Exception as e:
                print(f"âŒ å¤„ç†å¤±è´¥: {e}")
            
            print("\n" + "-"*50)
            time.sleep(1)  # é¿å…APIè°ƒç”¨è¿‡å¿«
    
    def interactive_chat(self, agent_type: str = "react"):
        """äº¤äº’å¼èŠå¤©"""
        if agent_type not in self.agents:
            print(f"âŒ æ™ºèƒ½ä½“ '{agent_type}' ä¸å­˜åœ¨")
            return
            
        agent = self.agents[agent_type]
        print(f"\nğŸ’¬ å¼€å§‹ä¸ {agent_type.upper()} æ™ºèƒ½ä½“å¯¹è¯")
        print("è¾“å…¥ 'quit' é€€å‡ºï¼Œ'reset' é‡ç½®å¯¹è¯ï¼Œ'help' æŸ¥çœ‹å¸®åŠ©\n")
        
        while True:
            try:
                user_input = input("ğŸ‘¤ æ‚¨: ").strip()
                
                if user_input.lower() == 'quit':
                    print("ğŸ‘‹ å†è§ï¼")
                    break
                elif user_input.lower() == 'reset':
                    agent.reset_conversation()
                    continue
                elif user_input.lower() == 'help':
                    print(agent.demonstrate_capabilities())
                    continue
                elif not user_input:
                    continue
                
                print("\nğŸ¤– æ™ºèƒ½ä½“æ€è€ƒä¸­...")
                response = agent.chat(user_input)
                print(f"ğŸ¤– æ™ºèƒ½ä½“: {response}\n")
                
            except KeyboardInterrupt:
                print("\nğŸ‘‹ å¯¹è¯å·²ä¸­æ–­ï¼Œå†è§ï¼")
                break
            except Exception as e:
                print(f"âŒ å‡ºç°é”™è¯¯: {e}\n")
    
    def show_agent_comparison(self):
        """æ˜¾ç¤ºä¸åŒæ™ºèƒ½ä½“çš„å¯¹æ¯”"""
        comparison = """
ğŸ“Š **æ™ºèƒ½ä½“ç±»å‹å¯¹æ¯”**

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç‰¹æ€§             â”‚ ReActæ™ºèƒ½ä½“   â”‚ Function Callâ”‚ ç®€åŒ–æ™ºèƒ½ä½“    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ¨ç†èƒ½åŠ›         â”‚ â˜…â˜…â˜…â˜…â˜…        â”‚ â˜…â˜…â˜…          â”‚ â˜…â˜…           â”‚
â”‚ å·¥å…·ä½¿ç”¨         â”‚ â˜…â˜…â˜…â˜…â˜…        â”‚ â˜…â˜…â˜…â˜…â˜…        â”‚ â˜…â˜…           â”‚
â”‚ æ‰§è¡Œæ•ˆç‡         â”‚ â˜…â˜…â˜…          â”‚ â˜…â˜…â˜…â˜…         â”‚ â˜…â˜…â˜…â˜…â˜…        â”‚
â”‚ ç»“æœå‡†ç¡®æ€§       â”‚ â˜…â˜…â˜…â˜…â˜…        â”‚ â˜…â˜…â˜…â˜…         â”‚ â˜…â˜…â˜…          â”‚
â”‚ å¯è§£é‡Šæ€§         â”‚ â˜…â˜…â˜…â˜…â˜…        â”‚ â˜…â˜…â˜…          â”‚ â˜…â˜…â˜…          â”‚
â”‚ èµ„æºæ¶ˆè€—         â”‚ â˜…â˜…           â”‚ â˜…â˜…â˜…          â”‚ â˜…â˜…â˜…â˜…â˜…        â”‚
â”‚ å¤æ‚ä»»åŠ¡å¤„ç†     â”‚ â˜…â˜…â˜…â˜…â˜…        â”‚ â˜…â˜…â˜…â˜…         â”‚ â˜…â˜…           â”‚
â”‚ å¼€å‘éš¾åº¦         â”‚ â˜…â˜…â˜…          â”‚ â˜…â˜…           â”‚ â˜…â˜…â˜…â˜…â˜…        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ’¡ **é€‰æ‹©å»ºè®®:**
â€¢ å¤æ‚åŒ»ç–—å’¨è¯¢ â†’ ReActæ™ºèƒ½ä½“
â€¢ ç®€å•ä¿¡æ¯æŸ¥è¯¢ â†’ Function Call
â€¢ å¿«é€Ÿå“åº”åœºæ™¯ â†’ ç®€åŒ–æ™ºèƒ½ä½“
        """
        
        print(comparison)
    
    def run_demo(self):
        """è¿è¡Œå®Œæ•´æ¼”ç¤º"""
        print("ğŸ¥ åŒ»ç–—æ™ºèƒ½ä½“ç³»ç»Ÿæ¼”ç¤º")
        print("="*60)
        
        # åˆå§‹åŒ–æ™ºèƒ½ä½“
        self.initialize_agents()
        
        while True:
            print("\nğŸ“‹ **èœå•é€‰é¡¹:**")
            print("1. ğŸ“– æ™ºèƒ½ä½“æ¶æ„è¯¦è§£")
            print("2. ğŸ§  ReActæ™ºèƒ½ä½“æ¼”ç¤º")
            print("3. ğŸ’¬ äº¤äº’å¼å¯¹è¯")
            print("4. ğŸ“Š æ™ºèƒ½ä½“å¯¹æ¯”")
            print("5. ğŸšª é€€å‡º")
            
            try:
                choice = input("\nè¯·é€‰æ‹© (1-5): ").strip()
                
                if choice == "1":
                    self.explain_agent_architectures()
                elif choice == "2":
                    self.demo_react_agent()
                elif choice == "3":
                    agent_type = input("é€‰æ‹©æ™ºèƒ½ä½“ç±»å‹ (react/simple) [react]: ").strip()
                    if not agent_type:
                        agent_type = "react"
                    self.interactive_chat(agent_type)
                elif choice == "4":
                    self.show_agent_comparison()
                elif choice == "5":
                    print("ğŸ‘‹ æ„Ÿè°¢ä½¿ç”¨æ™ºèƒ½ä½“æ¼”ç¤ºç³»ç»Ÿï¼")
                    break
                else:
                    print("âŒ æ— æ•ˆé€‰æ‹©ï¼Œè¯·é‡è¯•")
                    
            except KeyboardInterrupt:
                print("\nğŸ‘‹ ç¨‹åºå·²ä¸­æ–­ï¼Œå†è§ï¼")
                break
            except Exception as e:
                print(f"âŒ å‡ºç°é”™è¯¯: {e}")


def main():
    """ä¸»å‡½æ•°"""
    # æ£€æŸ¥ç¯å¢ƒ
    print("ğŸ” æ£€æŸ¥è¿è¡Œç¯å¢ƒ...")
    
    # æ£€æŸ¥å¿…è¦çš„æ–‡ä»¶
    required_files = [
        "src/medical_agent.py",
        "src/agent_tools.py", 
        "src/rag_retriever.py"
    ]
    
    missing_files = []
    for file_path in required_files:
        if not os.path.exists(file_path):
            missing_files.append(file_path)
    
    if missing_files:
        print(f"âŒ ç¼ºå°‘å¿…è¦æ–‡ä»¶: {missing_files}")
        print("è¯·ç¡®ä¿æ‰€æœ‰å¿…è¦çš„æ–‡ä»¶éƒ½å­˜åœ¨")
        return
    
    print("âœ… ç¯å¢ƒæ£€æŸ¥é€šè¿‡\n")
    
    # å¯åŠ¨æ¼”ç¤ºç³»ç»Ÿ
    demo_system = AgentSystemDemo()
    demo_system.run_demo()


if __name__ == "__main__":
    main()
